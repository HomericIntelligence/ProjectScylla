# Analysis Configuration
# Central configuration for reproducible statistical analysis
# All parameters must match values used in analysis pipeline

# Statistical Parameters
statistical:
  # Significance threshold for hypothesis tests
  alpha: 0.05

  # Bootstrap resampling parameters
  bootstrap:
    n_resamples: 10000
    random_state: 42
    confidence_level: 0.95
    method: "BCa"  # Bias-Corrected and accelerated

  # Minimum sample sizes for statistical tests
  min_samples:
    # Minimum for bootstrap confidence intervals
    bootstrap_ci: 2

    # Minimum for Mann-Whitney U test
    mann_whitney: 2

    # Minimum for normality tests (Shapiro-Wilk)
    normality_test: 3

    # Minimum for correlation analysis
    correlation: 3

    # Minimum for Kruskal-Wallis omnibus test
    kruskal_wallis: 2

  # Power analysis parameters
  power_analysis:
    n_simulations: 10000
    random_state: 42
    adequate_power_threshold: 0.80

# Figure Generation Parameters
figures:
  # Publication-quality output settings
  dpi:
    png: 300  # 300 DPI for publication (scale_factor=3.0)

  # Default dimensions (pixels at 1x scale)
  default_width: 400
  default_height: 300

  # Performance thresholds
  pass_threshold: 0.60  # Reference line for acceptable pass-rate

  # Correlation analysis metric pairs
  correlation_metrics:
    score: "Score"
    cost_usd: "Cost (USD)"
    total_tokens: "Total Tokens"
    duration_seconds: "Duration (s)"

  # Font settings
  fonts:
    family: "serif"
    title_size: 14
    label_size: 12
    tick_size: 11

  # Output formats
  formats:
    - "vl.json"  # Vega-Lite spec (version control)
    - "csv"      # Figure data
    - "png"      # Raster (300 DPI)
    - "pdf"      # Vector
    - "tex"      # LaTeX snippet

# Table Generation Parameters
tables:
  # LaTeX formatting
  latex:
    booktabs: true
    longtable_threshold: 20  # Rows before using longtable

  # Precision for numeric output
  precision:
    p_values: 4        # 4 decimal places (e.g., 0.0001)
    effect_sizes: 3    # 3 decimal places (e.g., 0.123)
    percentages: 1     # 1 decimal place (e.g., 45.3%)
    costs: 2           # 2 decimal places (e.g., $12.34)
    rates: 3           # 3 decimal places (e.g., 0.923)

# Color Palettes
colors:
  # Model colors (diverging blue-red)
  # NOTE: config.yaml is the authoritative source for all color definitions
  models:
    "Sonnet 4.5": "#4C78A8"  # Blue (Vega default blue)
    "Haiku 4.5": "#E45756"   # Red (Vega default red)
    "Opus 4.5": "#2ecc71"    # Green (reserved)

  # Tier colors (ColorBrewer Set2 - colorblind safe)
  tiers:
    T0: "#66c2a5"
    T1: "#fc8d62"
    T2: "#8da0cb"
    T3: "#e78ac3"
    T4: "#a6d854"
    T5: "#ffd92f"
    T6: "#e5c494"

  # Grade colors (traffic light + yellow + superior)
  grades:
    S: "#FFD700"  # Gold (superior, above A)
    A: "#2ecc71"  # Green
    B: "#3498db"  # Blue
    C: "#f39c12"  # Orange
    D: "#e67e22"  # Dark orange
    F: "#e74c3c"  # Red

  # Grade ordering (for consistent sorting across figures)
  grade_order:
    - "S"  # Superior (best)
    - "A"  # Excellent
    - "B"  # Good
    - "C"  # Acceptable
    - "D"  # Poor
    - "F"  # Fail (worst)

  # Judge colors (for judge variance and agreement figures)
  judges:
    "Opus 4.5": "#4C78A8"    # Blue
    "Sonnet 4.5": "#E45756"  # Red
    "Haiku 4.5": "#72B7B2"   # Teal

  # Criteria colors (for criteria analysis figures)
  criteria:
    functional: "#4C78A8"         # Blue
    code_quality: "#E45756"       # Red
    proportionality: "#72B7B2"    # Teal
    build_pipeline: "#F58518"     # Orange
    overall_quality: "#54A24B"    # Green

  # Phase colors (for phase duration analysis)
  phases:
    "Agent Execution": "#4C78A8"   # Blue
    "Judge Evaluation": "#E45756"  # Red

  # Token type colors (for token distribution figures)
  token_types:
    "Input (Fresh)": "#4C78A8"     # Blue
    "Input (Cached)": "#72B7B2"    # Teal
    "Output": "#E45756"            # Red
    "Cache Creation": "#F58518"    # Orange

  # Criteria colors (for criteria analysis)
  criteria:
    functional: "#4C78A8"       # Blue
    code_quality: "#E45756"     # Red
    proportionality: "#72B7B2"  # Teal
    build_pipeline: "#F58518"   # Orange
    overall_quality: "#54A24B"  # Green

  # Phase colors (for timing breakdown)
  phases:
    "Agent Execution": "#4C78A8"  # Blue
    "Judge Evaluation": "#E45756" # Red

# Data Loading Parameters
data:
  # Experiment exclusions (override with --exclude CLI flag)
  exclude_experiments: []

  # Default data directory (override with --data-dir CLI flag)
  default_data_dir: "~/fullruns"

  # Graceful degradation settings
  continue_on_error: true
  warn_on_missing_fields: true

# Reproducibility Metadata
reproducibility:
  # Analysis pipeline version
  pipeline_version: "1.0.0"

  # Expected pixi environment
  pixi_environment: "analysis"

  # Critical dependencies (from pixi.toml)
  dependencies:
    python: ">=3.10"
    pandas: ">=2.0.0"
    altair: ">=5.0.0"
    scipy: ">=1.10.0"
    numpy: ">=1.24.0"

  # Configuration file version
  config_version: "1.0.0"
